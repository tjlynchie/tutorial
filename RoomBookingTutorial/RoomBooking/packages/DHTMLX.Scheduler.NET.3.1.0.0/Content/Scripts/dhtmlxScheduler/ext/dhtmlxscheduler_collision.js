Scheduler.plugin(function(e){!function(){function t(t){var n=e._get_section_view();n&&t&&(a=e.getEvent(t)[e._get_section_property()])}var a,n;e.config.collision_limit=1,e.attachEvent("onBeforeDrag",function(e){return t(e),!0}),e.attachEvent("onBeforeLightbox",function(a){var d=e.getEvent(a);return n=[d.start_date,d.end_date],t(a),!0}),e.attachEvent("onEventChanged",function(t){if(!t||!e.getEvent(t))return!0;var a=e.getEvent(t);if(!e.checkCollision(a)){if(!n)return!1;a.start_date=n[0],a.end_date=n[1],a._timed=this.isOneDayEvent(a)
}return!0}),e.attachEvent("onBeforeEventChanged",function(t){return e.checkCollision(t)}),e.attachEvent("onEventAdded",function(t,a){var n=e.checkCollision(a);n||e.deleteEvent(t)}),e.attachEvent("onEventSave",function(t,a){if(a=e._lame_clone(a),a.id=t,!a.start_date||!a.end_date){var n=e.getEvent(t);a.start_date=new Date(n.start_date),a.end_date=new Date(n.end_date)}return a.rec_type&&e._roll_back_dates(a),e.checkCollision(a)}),e._check_sections_collision=function(t,a){var n=e._get_section_property();
return t[n]==a[n]&&t.id!=a.id?!0:!1},e.checkCollision=function(t){var n=[],d=e.config.collision_limit;if(t.rec_type)for(var i=e.getRecDates(t),_=0;_<i.length;_++)for(var r=e.getEvents(i[_].start_date,i[_].end_date),s=0;s<r.length;s++)(r[s].event_pid||r[s].id)!=t.id&&n.push(r[s]);else{n=e.getEvents(t.start_date,t.end_date);for(var l=0;l<n.length;l++)if(n[l].id==t.id){n.splice(l,1);break}}var o=e._get_section_view(),c=e._get_section_property(),v=!0;if(o){for(var h=0,l=0;l<n.length;l++)n[l].id!=t.id&&this._check_sections_collision(n[l],t)&&h++;
h>=d&&(v=!1)}else n.length>=d&&(v=!1);if(!v){var f=!e.callEvent("onEventCollision",[t,n]);return f||(t[c]=a||t[c]),f}return v}}()});
//# sourceMappingURL=../sources/ext/dhtmlxscheduler_collision.js.map